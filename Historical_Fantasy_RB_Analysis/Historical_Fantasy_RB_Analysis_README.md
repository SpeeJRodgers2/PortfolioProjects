# Finding Historical Fantasy Football Trends at the Running-Back Position
### Description:  The goal of this project was to find actionable trends that can help predict what running-backs are most likely to finish as top fantasy football assets.

To start, I looked through Kaggle datasets to find the most useful ones for the problem. I found a dataset that had player statistics from 2002 to the latest NFL season, 2022. This dataset has the main tables of data that I will be using to find trends. There is another dataset that has the ADP or average draft positon of each player in fantasy football drafts from the 2020 season to the 2022 season. After downloading these two datasets, I uploaded them to BigQuery on GoogleCloud to use their SQL environment.

Before I could use SQL to to join the tables that I wanted to use together, I had to clean one of them so that they could be properly joined without losing any data. Since the ADP data came from a totally different dataset, I have to find similar columns between it and the table it's being joined with. The two similar columns are the players name and the season. While the season columns are already the same, the player name columns are slightly different! The ADP data has "II", "III", and "IV" after some players names while the Seasonal_Data and NFL_Roster_Data player names do not. I imported the ADP data into Google Sheets, and I used the "Find and replace" tool to find every instance of "II", "III", and "IV" and replace it with nothing. There was now an extra white space after the names that made them still not match up, so I had use the TRIM function to remove the white space from those player names. Now, the ADP data can be joined with the other table without losing any data.

Now, using this SQL query below I was able to do four key things. First, I combined seven different tables together using JOIN statements. I joined the first two tables, Seasonal_Data and NFL_Roster_Data, with the default JOIN, an INNER JOIN, because I know there are no datapoints that don't fit the condition that they're being joined on. This means no data is lost. The rest of the tables are joined using LEFT JOINs because there are datapoints from the "right" table that don't fit the "left" table. That would cause data to be lost if done another way. Second, I used the SELECT and WHERE statements to "select" only the data that I was interested in analyzing "where" the players were running-backs or "RB"s. Third, I used the ORDER BY statement to "order" the data in two ways. The data would be ordered from the oldest year at the top to the most recent year at the bottom because of the "season ASC" statement. Then within those specific years the data would be ordered from the highest scoring fantasy players to the lowest scoring fantasy players because of the "fantasy_points DESC" statement. Fourth, I was able to create new columns of data with calculations that use other datapoints in the table.

![BigQuery SQL Code](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/BigQuery_SQL_Code_for_RBs.png?raw=true)

To finish cleaning the data, I downloaded the table from BigQuery as a csv file, and I imported it into Google Sheets. I added a season_rank column and a PPR_season_rank column to the table. These columns allow me to analyze the top running-backs data from each season. After adding and naming the columns, I needed to populate them. The table is already ordered from highest to lowest scoring running-back for each season, so I just needed to use the "Create a filter" tool to isolate each season, put a 1 and 2 in the cells under the season_rank header, highlight those two cells, and double click the blue button in the bottom right corner. This automatically populates the entire column with the proper ranking. To populate the PPR_season_rank column, I used the "Sort sheet" tool to order the rows from highest to lowest according to the fantasy_points_PPR column and then, repeat the previous steps to rank each running-back in the PPR_season_rank column. I repeated this process for each season in the table from 2002 to 2022. After this was completed, the data was completely cleaned and ready to be analyzed.

