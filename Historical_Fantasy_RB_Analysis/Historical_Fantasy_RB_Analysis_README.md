# Finding Historical Fantasy Football Trends at the Running-Back Position
### Description:  The goal of this project was to find actionable trends that can help predict what running-backs are most likely to finish as top fantasy football assets.

To start, I looked through Kaggle datasets to find the most useful ones for the problem. I found a dataset that had player statistics from 2002 to the latest NFL season, 2022. This dataset has the main tables of data that I will be using to find trends. There is another dataset that has the ADP or average draft positon of each player in fantasy football drafts from the 2020 season to the 2022 season. After downloading these two datasets, I uploaded them to BigQuery on GoogleCloud to use their SQL environment.

Before I could use SQL to to join the tables that I wanted to use together, I had to clean one of them so that they could be properly joined without losing any data. Since the ADP data came from a totally different dataset, I have to find similar columns between it and the table it's being joined with. The two similar columns are the players name and the season. While the season columns are already the same, the player name columns are slightly different! The ADP data has "II", "III", and "IV" after some players names while the Seasonal_Data and NFL_Roster_Data player names do not. I imported the ADP data into Google Sheets, and I used the "Find and replace" tool to find every instance of "II", "III", and "IV" and replace it with nothing. There was now an extra white space after the names that made them still not match up, so I had use the TRIM function to remove the white space from those player names. Now, the ADP data can be joined with the other table without losing any data.

Now, using this SQL query below I was able to do four key things. First, I combined seven different tables together using JOIN statements. I joined the first two tables, Seasonal_Data and NFL_Roster_Data, with the default JOIN, an INNER JOIN, because I know there are no datapoints that don't fit the condition that they're being joined on. This means no data is lost. The rest of the tables are joined using LEFT JOINs because there are datapoints from the "right" table that don't fit the "left" table. That would cause data to be lost if done another way. Second, I used the SELECT and WHERE statements to "select" only the data that I was interested in analyzing "where" the players were running-backs or "RB"s. Third, I used the ORDER BY statement to "order" the data in two ways. The data would be ordered from the oldest year at the top to the most recent year at the bottom because of the "season ASC" statement. Then within those specific years the data would be ordered from the highest scoring fantasy players to the lowest scoring fantasy players because of the "fantasy_points DESC" statement. Fourth, I was able to create new columns of data with calculations that use other datapoints in the table.

![BigQuery SQL Code](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/BigQuery_SQL_Code_for_RBs.png?raw=true)

To finish cleaning the data, I downloaded the table from BigQuery as a csv file, and I imported it into Google Sheets. I added a season_rank column and a PPR_season_rank column to the table. These columns allow me to analyze the top running-backs data from each season. After adding and naming the columns, I needed to populate them. The table is already ordered from highest to lowest scoring running-back for each season, so I just needed to use the "Create a filter" tool to isolate each season, put a 1 and 2 in the cells under the season_rank header, highlight those two cells, and double click the blue button in the bottom right corner. This automatically populates the entire column with the proper ranking. To populate the PPR_season_rank column, I used the "Sort sheet" tool to order the rows from highest to lowest according to the fantasy_points_PPR column and then, repeat the previous steps to rank each running-back in the PPR_season_rank column. I repeated this process for each season in the table from 2002 to 2022. After this was completed, the data was completely cleaned and ready to be analyzed.

Since the goal is to determine what running-backs will finish with the best rank, I decided to see what statistics inm the table coorelate strongly with both types of season ranks. The correlation coefficient calculated expresses te extent to which two things are related. When the variables are strongly related, the coefficient is bigger and vice-versa. I used the CORREL function in Google Sheets to calculate the the correlation coefficient between the season rank columns and different statistical columns. The two charts below show that we are likely to gain valuable insights from analyzing the number of touches, carries, receptions, touchdowns, and average snap percentage.

![Correlation of Standard Season RB Rank & Some Statistic](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Correlation%20of%20Standard%20Season%20RB%20Rank%20&%20Some%20Statistic.png?raw=true)
![Correlation of PPR Season RB Rank & Some Statistic](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Correlation%20of%20PPR%20Season%20RB%20Rank%20&%20Some%20Statistic.png?raw=true)

I used two different processes to analyze the key statistcs that were just pinpointed. The first process involved the COUNTIFS function on Google Sheets. I used it to count the number of occurrences that a running-back fits a certain criteria. For example, when I analyzed running-back carries, I grouped the number of carries by 50's and went from 0 to 401+. The COUNTIFS function counted the number of times running-backs had that grouping of carries. It also counted the times those running-backs finished in the top 10 and top 20 of the season rankings. I used the count of top 10 and top 20 of running-backs that had some grouping of carries and divided it by the total number of running-backs with that grouping of carries to get the percentage of running-backs that got into the top 10 and top 20 for the season with those carries. I repeated this process for receptions, touchdowns, and average snap percentage. The results can be seen below.

![% Top 10 & Top 20 RBs vs. # of Carries since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20Carries%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. # of Receptions since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20Receptions%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. # of TDs since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20TDs%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. Snap % since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20Snap%20%25%20since%202012.png?raw=true)

The second process involved using the AVERAGEIFS function on Google Sheets. The AVERAGEIFS function works just like the COUNTIFS function except instead of counting the number of occurences that fit a certain criteria it averages a set of numbers that fit the criteria. I used the AVERAGEIFS function to find the average number of carries, touchdowns, and average snap percentage of running-backs that finished in a certain range of the season ranks. The season ranks were grouped by 5's and went from 1 to 40. The results are shown below.

![Ave. # of Touches vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20%23%20of%20Touches%20vs.%20RB%20Rank%20since%202002.png?raw=true)
![Ave. # of TDs vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20%23%20of%20TDs%20vs.%20RB%20Rank%20since%202002.png?raw=true)
![Ave. Snap % vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20Snap%20%25%20vs.%20RB%20Rank%20since%202002.png?raw=true)

There were other interesting statistics in the dataset I put together and cleaned that I really wanted to analyze, but I needed to go about it in a specific way. The analysis needed to be tailored to the statistic, so it could give us valuable information. (say why Age needed to be analyzed by the counts instead of percentage)
