# Finding Historical Fantasy Football Trends at the Running-Back Position
### Description:  The goal of this project was to find actionable trends that can help predict what running-backs are most likely to finish as top fantasy football assets.

To start, I looked through Kaggle datasets to find the most useful ones for the problem. I found a dataset that had player statistics from 2002 to the latest NFL season, 2022. This dataset has the main tables of data that I will be using to find trends. There is another dataset that has the ADP or average draft positon of each player in fantasy football drafts from the 2020 season to the 2022 season. After downloading these two datasets, I uploaded them to BigQuery on GoogleCloud to use their SQL environment.

Before I could use SQL to to join the tables that I wanted to use together, I had to clean one of them so that they could be properly joined without losing any data. Since the ADP data came from a totally different dataset, I have to find similar columns between it and the table it's being joined with. The two similar columns are the players name and the season. While the season columns are already the same, the player name columns are slightly different! The ADP data has "II", "III", and "IV" after some players names while the Seasonal_Data and NFL_Roster_Data player names do not. I imported the ADP data into Google Sheets, and I used the "Find and replace" tool to find every instance of "II", "III", and "IV" and replace it with nothing. There was now an extra white space after the names that made them still not match up, so I had use the TRIM function to remove the white space from those player names. Now, the ADP data can be joined with the other table without losing any data.

Now, using this SQL query below I was able to do four key things. First, I combined seven different tables together using JOIN statements. I joined the first two tables, Seasonal_Data and NFL_Roster_Data, with the default JOIN, an INNER JOIN, because I know there are no datapoints that don't fit the condition that they're being joined on. This means no data is lost. The rest of the tables are joined using LEFT JOINs because there are datapoints from the "right" table that don't fit the "left" table. That would cause data to be lost if done another way. Second, I used the SELECT and WHERE statements to "select" only the data that I was interested in analyzing "where" the players were running-backs or "RB"s. Third, I used the ORDER BY statement to "order" the data in two ways. The data would be ordered from the oldest year at the top to the most recent year at the bottom because of the "season ASC" statement. Then within those specific years the data would be ordered from the highest scoring fantasy players to the lowest scoring fantasy players because of the "fantasy_points DESC" statement. Fourth, I was able to create new columns of data with calculations that use other datapoints in the table.

![BigQuery SQL Code](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/BigQuery_SQL_Code_for_RBs.png?raw=true)

To finish cleaning the data, I downloaded the table from BigQuery as a csv file, and I imported it into Google Sheets. I added a season_rank column and a PPR_season_rank column to the table. These columns allow me to analyze the top running-backs data from each season. After adding and naming the columns, I needed to populate them. The table is already ordered from highest to lowest scoring running-back for each season, so I just needed to use the "Create a filter" tool to isolate each season, put a 1 and 2 in the cells under the season_rank header, highlight those two cells, and double click the blue button in the bottom right corner. This automatically populates the entire column with the proper ranking. To populate the PPR_season_rank column, I used the "Sort sheet" tool to order the rows from highest to lowest according to the fantasy_points_PPR column and then, repeat the previous steps to rank each running-back in the PPR_season_rank column. I repeated this process for each season in the table from 2002 to 2022. After this was completed, the data was completely cleaned and ready to be analyzed.

Since the goal is to determine what running-backs will finish with the best rank, I decided to see what statistics inm the table coorelate strongly with both types of season ranks. The correlation coefficient calculated expresses te extent to which two things are related. When the variables are strongly related, the coefficient is bigger and vice-versa. I used the CORREL function in Google Sheets to calculate the the correlation coefficient between the season rank columns and different statistical columns. The two charts below show that we are likely to gain valuable insights from analyzing the number of touches, carries, receptions, touchdowns, and average snap percentage.

![Correlation of Standard Season RB Rank & Some Statistic](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Correlation%20of%20Standard%20Season%20RB%20Rank%20&%20Some%20Statistic.png?raw=true)
![Correlation of PPR Season RB Rank & Some Statistic](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Correlation%20of%20PPR%20Season%20RB%20Rank%20&%20Some%20Statistic.png?raw=true)

I used two different processes to analyze the key statistcs that were just pinpointed. The first process involved the COUNTIFS function on Google Sheets. I used it to count the number of occurrences that a running-back fits a certain criteria. For example, when I analyzed running-back carries, I grouped the number of carries by 50's and went from 0 to 401+. The COUNTIFS function counted the number of times running-backs had that grouping of carries. It also counted the times those running-backs finished in the top 10 and top 20 of the season rankings. I used the count of top 10 and top 20 of running-backs that had some grouping of carries and divided it by the total number of running-backs with that grouping of carries to get the percentage of running-backs that got into the top 10 and top 20 for the season with those carries. I repeated this process for receptions, touchdowns, and average snap percentage. The results can be seen below.

![% Top 10 & Top 20 RBs vs. # of Carries since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20Carries%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. # of Receptions since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20Receptions%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. # of TDs since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20%23%20of%20TDs%20since%202002.png?raw=true)
![% Top 10 & 20 RBs vs. Snap % since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20vs.%20Snap%20%25%20since%202012.png?raw=true)

The second process involved using the AVERAGEIFS function on Google Sheets. The AVERAGEIFS function works just like the COUNTIFS function except instead of counting the number of occurences that fit a certain criteria it averages a set of numbers that fit the criteria. I used the AVERAGEIFS function to find the average number of carries, touchdowns, and average snap percentage of running-backs that finished in a certain range of the season ranks. The season ranks were grouped by 5's and went from 1 to 40. The results are shown below.

![Ave. # of Touches vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20%23%20of%20Touches%20vs.%20RB%20Rank%20since%202002.png?raw=true)
![Ave. # of TDs vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20%23%20of%20TDs%20vs.%20RB%20Rank%20since%202002.png?raw=true)
![Ave. Snap % vs. RB Rank since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/Ave.%20Snap%20%25%20vs.%20RB%20Rank%20since%202002.png?raw=true)

There were other interesting statistics in the dataset I put together and cleaned that weren't highlighted by the correlation chart, and I really wanted to analyze them. Two of those statisitcs were age and years in the NFL. I ended up needing to go about analyzing these in a specific way, so it could give us valuable information. I performed the first of the two analysis processes where the COUNTIFS function was used to get the percentage of players that were top 10 and 20 running-backs out of all the running-backs that played at a specific age or with a certain number of years in the NFL. Those charts can be seen below.

![% Top 10 & 20 RBs since 2002 Grouped by Age](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20since%202002%20Grouped%20by%20Age.png?raw=true)
![% Top 10 & 20 RBs since 2012 Grouped by Age](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20since%202012%20Grouped%20by%20Age.png?raw=true)
![% Top 10 & 20 RBs Grouped by Years of Exp. since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Years%20of%20Exp.%20since%202002.png?raw=true) 
![% Top 10 & 20 RBs Grouped by Years of Exp. since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Years%20of%20Exp.%20since%202012.png?raw=true) 

These charts show that there isn't much of a drop off in performance as a running-back gets older or is in the NFL longer. I believe this is somehwat misleading because of how percentages work. There are simply less running-backs that hang around the NFL until they're 28 to 32 years old or are in the NFL for 7 to 10 years. The ones that do are obviously outliers in their talent and athletic ability. This to me means that if a running-back is very special and shows that they are different from the average running-back, they can still produce at a high level later into their careers. If we graph just the counts of the top 10 and 20 running-backs inseason ranking grouped by age or years in the NFL, we see a different story. Let's take a look at their charts below.

![# Top 10 & 20 RBs since 2002 Grouped by Age](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%23%20Top%2010%20&%2020%20RBs%20since%202002%20Grouped%20by%20Age.png?raw=true)
![# Top 10 & 20 RBs since 2012 Grouped by Age](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%23%20Top%2010%20&%2020%20RBs%20since%202012%20Grouped%20by%20Age.png?raw=true)
![# Top 10 & 20 RBs Grouped by Years of Exp. since 2002](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%23%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Years%20of%20Exp.%20since%202002.png?raw=true)
![# Top 10 & 20 RBs Grouped by Years of Exp. since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%23%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Years%20of%20Exp.%20since%202012.png?raw=true)

These charts show a clear drop off in performance once running-backs hit a certain age or were inthe NFL for so long. Performance seems to decline after 5 years in the NFL and once a running-back reaches 27 to 28 years old. There is also a pretty steady decline from those points onward as-well. I believe this is an insight that would have been missed had I only looked at the percentages. 

The other statisitcs that I wanted to analyze that weren't highlighted by the correlation chart were weight, draft round, and draft pick. I used th first of the two analysis processes on ech of these. Here are their charts below.

![% Top 10 & 20 RBs since 2012 Grouped by Weight](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20since%202012%20Grouped%20by%20Weight.png?raw=true)
![% Top 10 & 20 RBs Grouped by Round Drafted since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Round%20Drafted%20since%202012.png?raw=true)
![% Top 10 & 20 RBs Grouped by Draft Pick since 2012](https://github.com/SpeeJRodgers2/PortfolioProjects/blob/main/Historical_Fantasy_RB_Analysis/RB_Charts/%25%20Top%2010%20&%2020%20RBs%20Grouped%20by%20Draft%20Pick%20since%202012.png?raw=true)

Each of these charts gives us some actionable insights. Starting with the best weight for a runnin-back. You want your running-back to weigh 200 lbs. or more. The best weight is 220-229 lbs. but 210-129 lbs. is not far behind. I believe there's a few reasons for this. Typically bigger running-backs get carries near the goaline which are most likely to result in TDs, and we already saw how important TDs are. These running-backs also can handle he physciality of the position without missing games due to injury. The final plus to bigger running-backs is they can pass block against line-backers more easily than smaller running-backs. Pass-blocking is critical to get playing time in the NFL at running-back because teams must protect their quarter-backs since that's the most important position. Next, when looking at the round a running back is drafted, we prefer ones chosen in the first three rounds of the NFL draft in order of 1st being the most valuable to the 3rd being the least valubale of the 3. There is a steep drop off after the 3rd round. This is given more detail when looking at the draft picks chart! It tells us that being taken early in one of the first three rounds give you a boost over running-backs taken in the back half of those rounds. For example, a running-back taken in the second round is better than one taken late in the first round. This could be a result of how teams are positioned in the draft. The worst teams get the early picks while the best teams get the later picks. It's reasonable to think that there is less competition for touches and playing time on worse teams than there is on the better teams. 

I used the insights from all of these charts to calculate a weighted average number for each running-back that can be drafted for the 2023 fanatasy football season. The weights are on RB_Research_Results csv file along with the rankings, and they range from 0 to 3 depending on how consistently a statistic number results in a top 10 or 20 running-back. I made two columns containing a weighted average number. The just_data_score only takes into account insights from the analysis, and opinion_added_score accounts for the analysis insights along with two scores that use my opinion on how much a player will benefit from their teams situation as-well as how talented the running back is. The talent rating goes from 1 to 6 because talent can make up for a lot! The running-backs that stand out the most from the just_data_score are Austin Ekeler, Jonathon Taylor, Josh Jacobs, Joe Mixon, Rachaad White, D'Andre Swift, and Antonio Gibson. I compared the rankings to ESPN's rankings and it was pretty surprising how close a lot of them were. It validates the research to an extent. However, some of the players that stood out were not for the right reasons. Austin Ekeler 23 spots lower on my rankings, 1 on ESPN & 24 on mine. This is due to him being an undrafted, a smaller running-back, having a lower number of projected carries, and being on the downside of a typical running-back's career. Jonathon Taylor is ranked appropriately if he was playing the entire season without contractdisputes. He's the number 1 running-back on my rankings but 25 on ESPN's. This is because he is missing the first four games on the PUP (physically unable to perform) list and he might miss even more games because he wants a new contract. These are things that the data does not account for, so it's important to have someone that has proper context to look over the analysis results. Josh Jacobs and Joe Mixon are both ranked 5 spots higher on my rankings compared to ESPN's. This is because they are 220+ lb running-backs in their primes, projected to get a lot of touches, and were picked early in the NFL draft. I think these are justifiably higher and can give you an edge in your fantasy football league. Rachaad White can also give you an edge in your leagues. He's 7 spots higher in my rankings because of his young age and projected workload. D'Andre Swift is a risky pick that could flop or pay off. He's ranked 9 spots higher in my rankings because of his age, weight, and draft capital. The reason he isn't higher is due to his low projected workload since he may be splitting work on his team. Take a risk on him if you believe the talent will prevail. The last ranking hat really stands out is Antonio Gibson, and he's a whopping 11 spots higher in my rankings. This is because of his age, weight, draft capital, and projected recieving workload. I believe this might need more context. I don't endorse targeting Gibson because of his multiple years of dissapointing and the VERY high likelihood of splitting carries with backfield mate Brian Robinson. I would take Robinson over Gibson in all the drafts. 

It would be nice to continue research by adding more data to be looked at. However, this concludes my research for this project. A big thanks to everyone who read it all the way through, and good luck in your fantasy football leagues!
